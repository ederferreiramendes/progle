<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"  
                      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:p="http://primefaces.org/ui"
	xmlns:pm="http://primefaces.org/mobile">


<h:head>

	<meta name="viewport"
		content="width=device-width, initial-scale=1, shrink-to-fit=no, maximum-scale=1, user-scalable=no" />
	<link
		href="https://netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css"
		rel="stylesheet"></link>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<title>Progle</title>

	<link rel="stylesheet" type="text/css"
		href="#{request.contextPath}/resources/css/theme.css" />

	<link
		href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
		rel="stylesheet" />
	<link rel="stylesheet"
		href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" />
	<h:outputStylesheet library="webjars"
		name="primeflex/3.3.1/primeflex.min.css" />
		
	<style>
	/* Overlay bem simples e mobile-friendly */
	#globalAjaxOverlay {
		display: none;
		position: fixed;
		inset: 0;
		background: rgba(0, 0, 0, .25);
		z-index: 999999;
	}
	
	#globalAjaxOverlay .box {
		position: absolute;
		left: 50%;
		top: 50%;
		transform: translate(-50%, -50%);
		background: #fff;
		padding: 12px 14px;
		border-radius: 12px;
		box-shadow: 0 8px 24px rgba(0, 0, 0, .20);
		font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial,
			sans-serif;
		font-size: 14px;
		display: flex;
		gap: 10px;
		align-items: center;
	}
	</style>

	<script>
        function showGlobalAjax() {
            var el = document.getElementById('globalAjaxOverlay');
            if (el) el.style.display = 'block';
        }
        function hideGlobalAjax() {
            var el = document.getElementById('globalAjaxOverlay');
            if (el) el.style.display = 'none';
        }
    </script>
</h:head>


<h:body styleClass="ui-fluid">


	<f:loadBundle basename="messages" var="messages" />
	<p:growl id="msgs" closable="true" globalOnly="true">
		<p:autoUpdate />
	</p:growl>


	<!-- Overlay global -->
	<div id="globalAjaxOverlay">
		<div class="box">
			<!-- spinner “nativo” do PrimeIcons/tema via CSS simples -->
			<i class="pi pi-spin pi-spinner" style="font-size: 18px;"></i> <span>Carregando…</span>
		</div>
	</div>

	<!-- AjaxStatus global: vai valer para qualquer AJAX do template/página -->
	<p:ajaxStatus onstart="showGlobalAjax()" oncomplete="hideGlobalAjax()"
		onsuccess="hideGlobalAjax()" onerror="hideGlobalAjax()" />

	<div class="col-12 md:col-10 lg:col-8">

		<ui:insert name="content" />


		<p:commandButton value="Voltar"  style="margin-top: 10px; margin-bottom: 10px;"
			rendered="#{facesContext.viewRoot.viewId ne '/login.xhtml' and facesContext.viewRoot.viewId ne '/recuperarSenha.xhtml'}"
			icon="pi pi-arrow-left" type="button" process="@this"
			onclick="if (window.history.length > 1) history.back(); else location.href='#{request.contextPath}/login.xhtml';" />
	</div>



</h:body>

</html>